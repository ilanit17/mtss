<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×˜×‘×œ×ª ××™×¤×•×™ ×‘×ª×™ ×¡×¤×¨ ×œ××¤×§×—×™×</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f6fa;
            padding: 20px;
            direction: rtl;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .inspector-input {
            flex: 1;
            min-width: 300px;
        }

        .inspector-input label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2d3436;
        }

        .inspector-input input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }

        .table-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .table-wrapper {
            overflow-x: auto;
            max-height: 80vh;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 2000px;
        }

        th {
            background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
            color: white;
            padding: 15px 8px;
            text-align: center;
            font-weight: 600;
            font-size: 1em;
            position: sticky;
            top: 0;
            z-index: 10;
            border-right: 1px solid #555;
            vertical-align: middle;
        }

        th:first-child {
            min-width: 160px;
            text-align: right;
        }

        .subject-header {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%) !important;
        }

        td {
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
            border-right: 1px solid #e9ecef;
            text-align: center;
            vertical-align: middle;
            font-size: 1em;
        }

        td:first-child {
            text-align: right;
            font-weight: 600;
            background: #f8f9fa;
            position: sticky;
            right: 0;
            z-index: 5;
        }

        input[type="text"], input[type="number"], textarea, select {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
            background: white;
        }

        .challenges-selector {
            margin-top: 5px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #ddd;
            max-height: 200px;
            overflow-y: auto;
        }

        .challenges-header {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .challenge-option {
            display: block;
            margin-bottom: 3px;
            font-size: 0.75em;
            text-align: right;
        }

        .challenge-option input {
            margin-left: 4px;
            transform: scale(0.8);
        }

        .delete-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .delete-btn:hover {
            background: #ee5253;
            transform: scale(1.05);
        }

        .summary {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #636e72;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š ×˜×‘×œ×ª ××™×¤×•×™ ×‘×ª×™ ×¡×¤×¨</h1>
        <p>×›×œ×™ ××§×™×£ ×œ××™×¤×•×™ ×‘×ª×™ ×¡×¤×¨ ×¢× ×ª×—×•××™ ×œ×™×‘×” ×•××ª×’×¨×™× ××§×¦×•×¢×™×™×</p>
    </div>

    <div class="controls">
        <div class="inspector-input">
            <label>×©× ×”××¤×§×—/×ª:</label>
            <input type="text" id="inspector-name" placeholder="×”×›× ×¡/×™ ××ª ×©××š">
        </div>
        <button class="btn" onclick="addSchool()">â• ×”×•×¡×£ ×‘×™×ª ×¡×¤×¨</button>
        <button class="btn" onclick="loadDemo()">ğŸ¯ ×˜×¢×Ÿ × ×ª×•× ×™ ×“××•</button>
        <button class="btn" onclick="exportData()">ğŸ“Š ×™×™×¦× × ×ª×•× ×™×</button>
        <button class="btn" onclick="clearAll()">ğŸ—‘ï¸ × ×§×” ×”×›×œ</button>
    </div>

    <div class="table-container">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th rowspan="2">×©× ×‘×™×ª ×”×¡×¤×¨</th>
                        <th rowspan="2">×× ×”×œ/×ª</th>
                        <th rowspan="2">××¡' ×ª×œ××™×“×™×</th>
                        <th colspan="4" class="subject-header">×”×™×©×’×™× ×‘×ª×—×•××™ ×”×œ×™×‘×”</th>
                        <th rowspan="2">××§×œ×™× ×—×‘×¨×ª×™-×¨×’×©×™</th>
                        <th rowspan="2">×™×¦×™×‘×•×ª ×¦×•×•×ª</th>
                        <th rowspan="2">×—×–×•×Ÿ ×‘×™×ª ×¡×¤×¨×™</th>
                        <th rowspan="2">××™×›×•×ª ×¦×•×•×ª</th>
                        <th rowspan="2">×× ×”×™×’×•×ª</th>
                        <th rowspan="2">×©×™×ª×•×¤×™ ×¤×¢×•×œ×”</th>
                        <th rowspan="2">××¢×•×¨×‘×•×ª ×”×•×¨×™×</th>
                        <th rowspan="2">××¨×’×•×Ÿ ×”×”×•×¨××”</th>
                        <th rowspan="2">×©×™×ª×•×£ ×¤×¢×•×œ×” ×‘×™×Ÿ ××•×¨×™×</th>
                        <th rowspan="2">×”×¢×¨×•×ª / ×¤×¢×•×œ×•×ª</th>
                        <th rowspan="2">×¤×¢×•×œ×•×ª</th>
                    </tr>
                    <tr>
                        <th class="subject-header">×©×¤×”</th>
                        <th class="subject-header">××ª××˜×™×§×”</th>
                        <th class="subject-header">×× ×’×œ×™×ª</th>
                        <th class="subject-header">××“×¢×™×</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <tr>
                        <td colspan="18" class="empty-state">
                            <h3>ğŸ« ×œ× × ×•×¡×¤×• ×‘×ª×™ ×¡×¤×¨ ×¢×“×™×™×Ÿ</h3>
                            <p>×œ×—×¥ ×¢×œ "×”×•×¡×£ ×‘×™×ª ×¡×¤×¨" ××• "×˜×¢×Ÿ × ×ª×•× ×™ ×“××•" ×›×“×™ ×œ×”×ª×—×™×œ</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="summary">
        <h3>ğŸ“ˆ ×¡×™×›×•× ×”××™×¤×•×™</h3>
        <div style="font-size: 1.5em; margin-top: 10px;">
            <strong id="totalCount">0</strong> ×‘×ª×™ ×¡×¤×¨ ×‘××™×¤×•×™
        </div>
    </div>

    <script>
        let schools = [];
        let schoolId = 1;

        // ××ª×’×¨×™× ××§×¦×•×¢×™×™× - ×¨×©×™××” ××œ××”
        const challenges = {
            language: [
                '×¨××ª ×”×‘× ×ª ×”× ×§×¨× ××™× ×” ××¡×¤×§×ª',
                '×›×™×©×•×¨×™ ×›×ª×™×‘×” ×”×“×•×¨×©×™× ×©×™×¤×•×¨',
                '××•×¦×¨ ××™×œ×™× ××•×’×‘×œ ×‘×™×—×¡ ×œ×“×¨×™×©×•×ª ×ª×•×›× ×™×ª ×”×œ×™××•×“×™×',
                '×§×•×©×™ ×‘×‘×™×˜×•×™ ×‘×¢×œ ×¤×” ×•×‘× ×™×¡×•×— ×¨×¢×™×•× ×•×ª',
                '×”×™×¢×“×¨ ×ª×¨×‘×•×ª ×§×¨×™××” ××‘×•×¡×¡×ª ×‘×‘×™×ª ×”×¡×¤×¨',
                '××—×¡×•×¨ ×‘××¢× ×” ×“×™×¤×¨× ×¦×™××œ×™ ×œ×ª×œ××™×“×™× ×“×•×‘×¨×™ ×©×¤×•×ª ××—×¨×•×ª'
            ],
            math: [
                '×©×œ×™×˜×” ×œ× ××¡×¤×§×ª ×‘××™×•×× ×•×™×•×ª ×™×¡×•×“ ×‘×—×©×‘×•×Ÿ',
                '×§×•×©×™ ×‘××¡×˜×¨×˜×’×™×•×ª ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ××ª××˜×™×•×ª',
                '×—×¨×“×ª ××ª××˜×™×§×” ×”××©×¤×™×¢×” ×¢×œ ×”×™×©×’×™ ×”×ª×œ××™×“×™×',
                '××—×¡×•×¨ ×‘×©×™××•×© ×‘×××¦×¢×™ ×”××—×©×” ×•×××¦×¢×™× ×“×™×“×§×˜×™×™×',
                '×”×™×¢×“×¨ ×“×™×¤×¨× ×¦×™××¦×™×” ××¡×¤×§×ª ×‘×”×•×¨××”',
                '×—×•×¡×¨ ×‘×§×™×©×•×¨ ×‘×™×Ÿ ×”××ª××˜×™×§×” ×œ×—×™×™ ×”×™×•××™×•×'
            ],
            english: [
                '×—×•×¡×¨ ×‘×™×˜×—×•×Ÿ ×‘×©×™××•×© ×‘×©×¤×” ×”×× ×’×œ×™×ª ×‘×¢×œ ×¤×”',
                '×—×©×™×¤×” ××•×’×‘×œ×ª ×œ×× ×’×œ×™×ª ××—×•×¥ ×œ××¡×’×¨×ª ×”×©×™×¢×•×¨',
                '×©×™×˜×•×ª ×”×•×¨××” ×©××™× ×Ÿ ××•×ª×××•×ª ×œ×¦×¨×›×™ ×”×××” ×”-21',
                '×©×™××•×© ××•×’×‘×œ ×‘×›×œ×™× ×˜×›× ×•×œ×•×’×™×™× ×œ×”×•×¨××ª ×”×©×¤×”',
                '×§×‘×•×¦×•×ª ×œ××™×“×” ×’×“×•×œ×•×ª ×”××§×©×•×ª ×¢×œ ×ª×¨×’×•×œ ××¤×§×˜×™×‘×™',
                '××—×¡×•×¨ ×‘×©×™××•×© ×‘×—×•××¨×™× ××•×ª× ×˜×™×™× ×‘×”×•×¨××”'
            ],
            science: [
                '××—×¡×•×¨ ×‘×¦×™×•×“ ××¢×‘×“×” ×•×××¦×¢×™ ×”××—×©×”',
                '×¤×™×ª×•×— ×œ× ××¡×¤×§ ×©×œ ××™×•×× ×•×™×•×ª ×—×§×¨ ××“×¢×™',
                '××™×¢×•×˜ ×”×ª× ×¡×•×™×•×ª ××¢×©×™×•×ª ×‘×ª×”×œ×™×›×™ ×œ××™×“×”',
                '×¤×™×ª×•×— ×œ× ××¡×¤×§ ×©×œ ×—×©×™×‘×” ××“×¢×™×ª',
                '×ª×•×›× ×™×ª ×œ×™××•×“×™× ×©××™× ×” ××¢×•×“×›× ×ª ×œ×—×–×™×ª ×”××“×¢',
                '×—×•×¡×¨ ×‘×§×™×©×•×¨ ×‘×™×Ÿ ×ª×›× ×™ ×”××“×¢ ×œ×¡×‘×™×‘×” ×•×œ×§×”×™×œ×”'
            ],
            climate: [
                '××™×¨×•×¢×™ ××œ×™××•×ª ×ª×›×•×¤×™× ×”×“×•×¨×©×™× ×”×ª×¢×¨×‘×•×ª',
                '××™× ×˜×¨××§×¦×™×•×ª ×œ× ××™×˜×‘×™×•×ª ×‘×™×Ÿ ×ª×œ××™×“×™×',
                '×ª×—×•×©×ª ×©×™×™×›×•×ª × ××•×›×” ×©×œ ×ª×œ××™×“×™× ×œ×‘×™×ª ×”×¡×¤×¨',
                '××—×¡×•×¨ ×‘××¢× ×” ×¨×’×©×™ ××•×ª×× ×œ×¦×¨×›×™ ×”×ª×œ××™×“×™×',
                '××™× ×˜×¨××§×¦×™×•×ª ×œ× ××™×˜×‘×™×•×ª ×‘×™×Ÿ ××•×¨×™× ×œ×ª×œ××™×“×™×',
                '×”×™×¢×“×¨ ×ª×¨×‘×•×ª ×©×œ ×”×›×¨×” ×•×”×•×§×¨×ª ×”×™×©×’×™×'
            ],
            staff_stability: [
                '×ª×—×œ×•×¤×” ×’×‘×•×”×” ×©×œ ×¦×•×•×ª ×”×•×¨××”',
                '×”×¡×ª××›×•×ª ×’×‘×•×”×” ×¢×œ ××•×¨×™× ××—×œ×™×¤×™×',
                '××—×¡×•×¨ ×‘×œ×™×•×•×™ ×•×”×“×¨×›×” ×œ××•×¨×™× ×—×“×©×™×',
                '×ª× ××™ ×¢×‘×•×“×” ×©××™× × ×ª×•××›×™× ×‘×”×ª×¤×ª×—×•×ª ××§×¦×•×¢×™×ª',
                '××—×¡×•×¨ ×‘×”×–×“×× ×•×™×•×ª ×œ×¤×™×ª×•×— ××§×¦×•×¢×™ ×¨×œ×•×•× ×˜×™',
                '×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ × ××•×›×” ×‘×§×¨×‘ ×¦×•×•×ª ×”×”×•×¨××”'
            ],
            vision: [
                '×”×™×¢×“×¨ ×—×–×•×Ÿ ×‘×™×ª ×¡×¤×¨×™ ×‘×¨×•×¨ ×”××¦×™×‘ ×‘××¨×›×–×• ××ª ×”×™×©×’×™ ×”×ª×œ××™×“×™×',
                '×—×–×•×Ÿ ×‘×™×ª ×”×¡×¤×¨ ××™× ×• ××©×•×ª×£ ×œ×›×œ×œ ×”×¦×•×•×ª ×”×—×™× ×•×›×™',
                '×”×™×¢×“×¨ ×ª×›× ×•×Ÿ ××¡×˜×¨×˜×’×™ ××¨×•×š ×˜×•×•×—',
                '×”×’×“×¨×ª ×™×¢×“×™× ×œ× ××“×™×“×™× ××• ×œ× ×¨×™××œ×™×™×',
                '×”×™×¢×“×¨ ××¢×§×‘ ×©×™×˜×ª×™ ××—×¨ ×”×ª×§×“××•×ª ×œ×¢×‘×¨ ×”×™×¢×“×™×',
                '×—×•×¡×¨ ×©×™×ª×•×£ ×”×§×”×™×œ×” ×‘×’×™×‘×•×© ×”×—×–×•×Ÿ ×”×‘×™×ª ×¡×¤×¨×™'
            ],
            staff_quality: [
                '×¤×¢×¨×™× ×‘×”×›×©×¨×” ×”××§×¦×•×¢×™×ª ×©×œ ×¦×•×•×ª ×”×”×•×¨××”',
                '×¤×¨×§×˜×™×§×•×ª ×”×•×¨××” ×©××™× ×Ÿ ××•×ª×××•×ª ×œ×¦×¨×›×™ ×”×ª×œ××™×“×™×',
                '××™×¢×•×˜ ×™×•×–××•×ª ×—×“×©× ×™×•×ª ×‘×ª×—×•× ×”×¤×“×’×•×’×™×”',
                '××ª×’×¨×™× ×‘× ×™×”×•×œ ×›×™×ª×” ××¤×§×˜×™×‘×™',
                '×©×™××•×© ××•×’×‘×œ ×‘×›×œ×™ ×”×¢×¨×›×” ××’×•×•× ×™×',
                '×¦×™×¤×™×•×ª × ××•×›×•×ª ××”×™×©×’×™ ×”×ª×œ××™×“×™×'
            ],
            leadership: [
                '×× ×”×™×’×•×ª ×¤×“×’×•×’×™×ª ×”×“×•×¨×©×ª ×—×™×–×•×§ ×•×”×¢××§×”',
                '×ª×”×œ×™×›×™ ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×œ× ××‘×•×¡×¡×™ × ×ª×•× ×™×',
                '×× ×”×™×’×•×ª ×‘×™× ×™×™× ×œ×œ× ×ª×¤×§×™×“ ××©××¢×•×ª×™ ×‘×”×•×‘×œ×ª ×¦×•×•×ª×™×',
                '×—×•×¡×¨ ×××•×Ÿ ×‘×™×Ÿ ×¦×•×•×ª ×”××•×¨×™× ×œ×”× ×”×œ×ª ×‘×™×ª ×”×¡×¤×¨',
                '×”×™×¢×“×¨ ×ª×”×œ×™×›×™× ××›×•×•× ×™× ×œ×‘× ×™×™×ª ×¦×•×•×ª',
                '× ×™×”×•×œ ×œ× ××¤×§×˜×™×‘×™ ×©×œ ×ª×”×œ×™×›×™ ×©×™× ×•×™'
            ],
            collaboration: [
                '×”×™×¢×“×¨ ×©×™×— ××¤×§×˜×™×‘×™ ×¢× ×”×¨×©×•×ª ×œ×œ×™×•×•×™ ×•×ª××™×›×”',
                '× ×™×¦×•×œ ×œ× ××™×˜×‘×™ ×©×œ ××©××‘×™× ×—×™×¦×•× ×™×™×',
                '×§×©×¨×™× ××•×’×‘×œ×™× ×¢× ×’×•×¨××™× ×¢×¡×§×™×™× ×‘×§×”×™×œ×”',
                '×©×™×ª×•×£ ×¤×¢×•×œ×” ××•×’×‘×œ ×¢× ×’×•×¨××™× ×‘×¨×©×•×ª ×”××§×•××™×ª',
                '×”×™×¢×“×¨ ×ª×•×›× ×™×ª ××•×‘× ×™×ª ×œ×”×ª× ×“×‘×•×ª ×•××¢×•×¨×‘×•×ª ×—×‘×¨×ª×™×ª',
                '××™×¢×•×˜ ×¤×¢×™×œ×•×™×•×ª ×ª×¨×‘×•×ª×™×•×ª ××©×•×ª×¤×•×ª ×¢× ×”×§×”×™×œ×”'
            ],
            parent_involvement: [
                '×”×©×ª×ª×¤×•×ª ××•×’×‘×œ×ª ×©×œ ×”×•×¨×™× ×‘××¤×’×©×™× ×‘×™×ª ×¡×¤×¨×™×™×',
                '×ª×§×©×•×¨×ª ×œ× ×¨×¦×™×¤×” ×‘×™×Ÿ ×‘×™×ª ×”×¡×¤×¨ ×œ××©×¤×—×•×ª ×”×ª×œ××™×“×™×',
                '××¢×•×¨×‘×•×ª ××•×’×‘×œ×ª ×©×œ ×”×•×¨×™× ×‘×¤×¢×™×œ×•×™×•×ª ×‘×™×ª ×¡×¤×¨×™×•×ª',
                '××—×¡×•×¨ ×‘×›×œ×™× ×œ×”×•×¨×™× ×œ×ª××™×›×” ×‘×œ××™×“×” ×‘×‘×™×ª',
                '××™×¢×•×˜ ×ª×•×›× ×™×•×ª ×”×“×¨×›×” ×•×”×¢×©×¨×” ×œ×”×•×¨×™×',
                '×—×¡××™× ×ª×¨×‘×•×ª×™×™× ×”××§×©×™× ×¢×œ ×©×™×ª×•×£ ×¤×¢×•×œ×” ×¢× ×”×•×¨×™×'
            ],
            teaching_organization: [
                '×”×™×¢×“×¨ ×©×’×¨×•×ª ×©×œ ×ª×›× ×•×Ÿ ×”×•×¨××”',
                '×¤×¨×§×˜×™×§×•×ª ×”×•×¨××” ×©××™× ×Ÿ ××•×ª×××•×ª ×œ×¦×¨×›×™ ×”×ª×œ××™×“×™×',
                '×”×™×¢×“×¨ × ×™×ª×•×— ×©×™×˜×ª×™ ×©×œ × ×ª×•× ×™ ×”×ª×œ××™×“×™×',
                '×”×™×¢×“×¨ ×“×™×•× ×™× ××©×•×ª×¤×™× ×¢×œ ×”×ª×§×“××•×ª ×”×ª×œ××™×“×™×',
                '×”×™×¢×“×¨ ×©×™×— ×¤×ª×•×— ×•×›× ×” ×¢×œ ×”×¦×•×¨×š ×‘×©×™×¤×•×¨ ×”×”×•×¨××”'
            ],
            teacher_collaboration: [
                '×”××•×¨×™× ××™× × ×¤×•×¢×œ×™× ×‘×©×™×ª×•×£ ×¤×¢×•×œ×” ×‘×ª×›× ×•×Ÿ ×”×”×•×¨××”',
                '×”×™×¢×“×¨ ×¤×ª×™×—×•×ª ×œ×œ××™×“×” ×©×œ ×“×¨×›×™ ×”×•×¨××” ×—×“×©×•×ª',
                '×¦×™×¤×™×™×” ×œ×©×™×¤×•×¨ ×”×™×©×’×™× ×œ×œ× ×©×™× ×•×™ ×‘×©×™×˜×•×ª ×”×”×•×¨××”',
                '×”×™×¢×“×¨ ×©×’×¨×•×ª ×©×œ ×œ××™×“×ª ×¢××™×ª×™× ×•×¦×¤×™×™×” ×”×“×“×™×ª',
                '×”×™×¢×“×¨ ×××•× ×” ×‘×™×›×•×œ×•×ª ×”×ª×œ××™×“×™× ×•×”×˜×œ×ª ×”××—×¨×™×•×ª ×¢×œ×™×”×'
            ]
        };

        function addSchool() {
            const school = {
                id: schoolId++,
                name: '',
                principal: '',
                students: '',
                languageScore: '',
                mathScore: '',
                englishScore: '',
                scienceScore: '',
                climate: '',
                stability: '',
                vision: '',
                staffQuality: '',
                leadership: '',
                collaboration: '',
                parentInvolvement: '',
                teachingOrganization: '',
                teacherCollaboration: '',
                notes: '',
                languageChallenges: [],
                mathChallenges: [],
                englishChallenges: [],
                scienceChallenges: [],
                climateChallenges: [],
                stabilityChallenges: [],
                visionChallenges: [],
                staffQualityChallenges: [],
                leadershipChallenges: [],
                collaborationChallenges: [],
                parentChallenges: [],
                teachingOrganizationChallenges: [],
                teacherCollaborationChallenges: []
            };
            
            schools.push(school);
            renderTable();
            updateSummary();
        }

        function removeSchool(id) {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×‘×™×ª ×”×¡×¤×¨?')) {
                schools = schools.filter(school => school.id !== id);
                renderTable();
                updateSummary();
            }
        }

        function updateSchool(id, field, value) {
            const school = schools.find(s => s.id === id);
            if (school) {
                school[field] = value;
            }
        }

        function updateChallenge(id, category, challengeIndex, checked) {
            const school = schools.find(s => s.id === id);
            if (school) {
                const challengeField = category + 'Challenges';
                if (!school[challengeField]) {
                    school[challengeField] = [];
                }
                
                if (checked) {
                    if (!school[challengeField].includes(challengeIndex)) {
                        school[challengeField].push(challengeIndex);
                    }
                } else {
                    school[challengeField] = school[challengeField].filter(c => c !== challengeIndex);
                }
            }
        }

        function createChallengeSelector(category, schoolId) {
            const categoryData = challenges[category] || [];
            const school = schools.find(s => s.id === schoolId);
            const selectedChallenges = school ? (school[category + 'Challenges'] || []) : [];
            
            let html = `<div class="challenges-selector">
                <div class="challenges-header">ğŸ¯ ××ª×’×¨×™× ××§×¦×•×¢×™×™× (${selectedChallenges.length})</div>`;
            
            categoryData.forEach((challenge, index) => {
                const isChecked = selectedChallenges.includes(index) ? 'checked' : '';
                html += `<label class="challenge-option">
                    <input type="checkbox" ${isChecked} 
                           onchange="updateChallenge(${schoolId}, '${category}', ${index}, this.checked)">
                    ${challenge}
                </label>`;
            });
            
            html += '</div>';
            return html;
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            
            if (schools.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="18" class="empty-state">
                            <h3>ğŸ« ×œ× × ×•×¡×¤×• ×‘×ª×™ ×¡×¤×¨ ×¢×“×™×™×Ÿ</h3>
                            <p>×œ×—×¥ ×¢×œ "×”×•×¡×£ ×‘×™×ª ×¡×¤×¨" ××• "×˜×¢×Ÿ × ×ª×•× ×™ ×“××•" ×›×“×™ ×œ×”×ª×—×™×œ</p>
                        </td>
                    </tr>`;
                return;
            }
            
            tbody.innerHTML = '';
            
            schools.forEach(school => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${school.name}" onchange="updateSchool(${school.id}, 'name', this.value)" placeholder="×©× ×‘×™×ª ×”×¡×¤×¨"></td>
                    <td><input type="text" value="${school.principal}" onchange="updateSchool(${school.id}, 'principal', this.value)" placeholder="×©× ×”×× ×”×œ/×ª"></td>
                    <td><input type="number" value="${school.students}" onchange="updateSchool(${school.id}, 'students', this.value)" placeholder="××¡×¤×¨"></td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'languageScore', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.languageScore === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.languageScore === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.languageScore === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.languageScore === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.languageScore === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('language', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'mathScore', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.mathScore === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.mathScore === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.mathScore === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.mathScore === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.mathScore === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('math', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'englishScore', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.englishScore === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.englishScore === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.englishScore === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.englishScore === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.englishScore === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('english', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'scienceScore', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.scienceScore === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.scienceScore === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.scienceScore === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.scienceScore === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.scienceScore === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('science', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'climate', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.climate === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.climate === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.climate === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.climate === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.climate === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('climate', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'stability', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.stability === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.stability === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.stability === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.stability === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.stability === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('staff_stability', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'vision', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.vision === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.vision === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.vision === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.vision === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.vision === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('vision', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'staffQuality', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.staffQuality === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.staffQuality === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.staffQuality === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.staffQuality === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.staffQuality === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('staff_quality', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'leadership', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.leadership === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.leadership === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.leadership === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.leadership === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.leadership === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('leadership', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'collaboration', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.collaboration === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.collaboration === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.collaboration === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.collaboration === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.collaboration === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('collaboration', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'parentInvolvement', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.parentInvolvement === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.parentInvolvement === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.parentInvolvement === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.parentInvolvement === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.parentInvolvement === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('parent_involvement', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'teachingOrganization', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.teachingOrganization === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.teachingOrganization === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.teachingOrganization === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.teachingOrganization === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.teachingOrganization === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('teaching_organization', school.id)}
                    </td>
                    
                    <td>
                        <select onchange="updateSchool(${school.id}, 'teacherCollaboration', this.value)">
                            <option value="">×‘×—×¨ ×¨××”</option>
                            <option value="1" ${school.teacherCollaboration === '1' ? 'selected' : ''}>1 - × ××•×›×” ×××•×“</option>
                            <option value="2" ${school.teacherCollaboration === '2' ? 'selected' : ''}>2 - × ××•×›×”</option>
                            <option value="3" ${school.teacherCollaboration === '3' ? 'selected' : ''}>3 - ×‘×™× ×•× ×™×ª</option>
                            <option value="4" ${school.teacherCollaboration === '4' ? 'selected' : ''}>4 - ×’×‘×•×”×”</option>
                            <option value="5" ${school.teacherCollaboration === '5' ? 'selected' : ''}>5 - ×’×‘×•×”×” ×××•×“</option>
                        </select>
                        ${createChallengeSelector('teacher_collaboration', school.id)}
                    </td>
                    
                    <td><textarea rows="2" onchange="updateSchool(${school.id}, 'notes', this.value)" placeholder="×”×¢×¨×•×ª ×•×¤×¢×•×œ×•×ª ××ª×•×›× × ×•×ª">${school.notes}</textarea></td>
                    <td><button class="delete-btn" onclick="removeSchool(${school.id})">ğŸ—‘ï¸ ××—×§</button></td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updateSummary() {
            document.getElementById('totalCount').textContent = schools.length;
        }

        function loadDemo() {
            schools = [
                {
                    id: 1,
                    name: '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×”×’×œ×™×œ',
                    principal: '×¨×•× ×™×ª ×›×”×Ÿ',
                    students: '520',
                    languageScore: '4',
                    mathScore: '4',
                    englishScore: '3',
                    scienceScore: '4',
                    climate: '4',
                    stability: '4',
                    vision: '4',
                    staffQuality: '4',
                    leadership: '4',
                    collaboration: '3',
                    parentInvolvement: '4',
                    teachingOrganization: '4',
                    teacherCollaboration: '3',
                    notes: '×‘×™×ª ×¡×¤×¨ ××•×‘×™×œ ×‘××–×•×¨, ××”×•×•×” ×‘×™×ª ×¡×¤×¨ ×× ×˜×•×¨. ×“×•×¨×© ×—×™×–×•×§ ×§×œ ×‘×©×™×ª×•×¤×™ ×¤×¢×•×œ×” ×—×™×¦×•× ×™×™×',
                    languageChallenges: [],
                    mathChallenges: [],
                    englishChallenges: [2],
                    scienceChallenges: [],
                    climateChallenges: [],
                    stabilityChallenges: [],
                    visionChallenges: [],
                    staffQualityChallenges: [],
                    leadershipChallenges: [],
                    collaborationChallenges: [1],
                    parentChallenges: [],
                    teachingOrganizationChallenges: [],
                    teacherCollaborationChallenges: [3]
                },
                {
                    id: 2,
                    name: '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×”×“×§×œ×™×',
                    principal: '××©×” ×œ×•×™',
                    students: '380',
                    languageScore: '2',
                    mathScore: '2',
                    englishScore: '2',
                    scienceScore: '2',
                    climate: '2',
                    stability: '2',
                    vision: '2',
                    staffQuality: '2',
                    leadership: '2',
                    collaboration: '2',
                    parentInvolvement: '2',
                    teachingOrganization: '2',
                    teacherCollaboration: '2',
                    notes: '×‘×™×ª ×¡×¤×¨ ×‘×¡×™×›×•×Ÿ ×’×‘×•×” - ×“×•×¨×© ×ª×•×›× ×™×ª ×”×ª×¢×¨×‘×•×ª ××§×™×¤×” ×•××¢×§×‘ ×¦××•×“. ×¢×“×™×¤×•×ª ×œ×¤×™×ª×•×— ××§×¦×•×¢×™ × ×¨×—×‘',
                    languageChallenges: [1, 4, 0],
                    mathChallenges: [0, 1, 4],
                    englishChallenges: [0, 1, 4],
                    scienceChallenges: [0, 2, 3],
                    climateChallenges: [0, 1, 2],
                    stabilityChallenges: [0, 1, 5],
                    visionChallenges: [0, 1],
                    staffQualityChallenges: [0, 1, 5],
                    leadershipChallenges: [0, 1],
                    collaborationChallenges: [0, 1],
                    parentChallenges: [0, 1],
                    teachingOrganizationChallenges: [0, 2, 4],
                    teacherCollaborationChallenges: [0, 1, 4]
                }
            ];

            // ×™×¦×™×¨×ª 16 ×‘×ª×™ ×¡×¤×¨ × ×•×¡×¤×™×
            const additionalSchools = [];
            const schoolNames = [
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ××œ×•× ×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×”×–×™×ª×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×›×¨××œ×™×',
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×©×§×“×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×ª××¨×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×‘×¨×•×©×™×',
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ××©×œ×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ××¨×–×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×¡×‘×™×•× ×™×',
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×¨×™××•× ×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×œ×‘× ×“×¨×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×—×¨×•×¦×™×',
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ × ×¨×§×™×¡×™×', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×¤×¨×™×—×ª ×”××‘×™×‘', '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×’×¤× ×™×',
                '×‘×™×ª ×¡×¤×¨ ×™×¡×•×“×™ ×ª×œ×ª× ×™×'
            ];
            
            const principals = [
                '×“× ×” ××‘×¨×”×', '×™×•×¡×™ ××–×¨×—×™', '× ×™×¨×™×ª ×©××™×¨', '××‘×™×‘×” ×¨×•×–×Ÿ', '×¨×•×¢×™ ×‘×Ÿ ×“×•×“',
                '××™×¨×™ ××¨×“×™×˜×™', '×“×•×“ ×’×¨×™× ×‘×¨×’', '×©×¨×” ×›×¥', '××™×œ×Ÿ ×©×˜×¨×Ÿ', '×™×¢×œ ×¤×¨×™×“××Ÿ',
                '×¨×•× ×™ ××”×¨×•×Ÿ', '××™×›×œ ×‘×¨', '×¢××™×ª ×’×•×œ×“', '×œ×™××ª ××•×¨', '××‘×™ ×©×œ×•×', '×’×œ×™×ª ×™×¨×•×Ÿ'
            ];

            for (let i = 0; i < 16; i++) {
                const score1 = Math.floor(Math.random() * 5) + 1;
                const score2 = Math.floor(Math.random() * 5) + 1;
                additionalSchools.push({
                    id: i + 3,
                    name: schoolNames[i],
                    principal: principals[i],
                    students: String(Math.floor(Math.random() * 400) + 150),
                    languageScore: String(score1),
                    mathScore: String(score2),
                    englishScore: String(Math.floor(Math.random() * 5) + 1),
                    scienceScore: String(Math.floor(Math.random() * 5) + 1),
                    climate: String(Math.floor(Math.random() * 5) + 1),
                    stability: String(Math.floor(Math.random() * 5) + 1),
                    vision: String(Math.floor(Math.random() * 5) + 1),
                    staffQuality: String(Math.floor(Math.random() * 5) + 1),
                    leadership: String(Math.floor(Math.random() * 5) + 1),
                    collaboration: String(Math.floor(Math.random() * 5) + 1),
                    parentInvolvement: String(Math.floor(Math.random() * 5) + 1),
                    teachingOrganization: String(Math.floor(Math.random() * 5) + 1),
                    teacherCollaboration: String(Math.floor(Math.random() * 5) + 1),
                    notes: `×‘×™×ª ×¡×¤×¨ ×¢× ××ª×’×¨×™× ${score1 < 3 ? '×¨×‘×™×' : '××ª×•× ×™×'}. ${score2 < 3 ? '×“×•×¨×© ×”×ª×¢×¨×‘×•×ª ××™×™×“×™×ª' : '×¤×•×˜× ×¦×™××œ ×˜×•×‘ ×œ×©×™×¤×•×¨'}.`,
                    languageChallenges: score1 < 3 ? [0, 1] : [],
                    mathChallenges: score2 < 3 ? [0, 1, 2] : [],
                    englishChallenges: Math.random() > 0.5 ? [0] : [],
                    scienceChallenges: Math.random() > 0.7 ? [0] : [],
                    climateChallenges: Math.random() > 0.6 ? [1] : [],
                    stabilityChallenges: Math.random() > 0.7 ? [0] : [],
                    visionChallenges: Math.random() > 0.8 ? [0] : [],
                    staffQualityChallenges: Math.random() > 0.7 ? [1] : [],
                    leadershipChallenges: Math.random() > 0.8 ? [0] : [],
                    collaborationChallenges: Math.random() > 0.7 ? [0] : [],
                    parentChallenges: Math.random() > 0.6 ? [0] : [],
                    teachingOrganizationChallenges: Math.random() > 0.7 ? [0] : [],
                    teacherCollaborationChallenges: Math.random() > 0.7 ? [0] : []
                });
            }

            schools = schools.concat(additionalSchools);
            
            schoolId = 19;
            document.getElementById('inspector-name').value = '×™×¢×œ × ×ª×Ÿ';
            renderTable();
            updateSummary();
            
            alert('× ×ª×•× ×™ ×“××• × ×˜×¢× ×• ×‘×”×¦×œ×—×”! 18 ×‘×ª×™ ×¡×¤×¨ ×©×œ ×”××¤×§×—×ª ×™×¢×œ × ×ª×Ÿ');
        }

        function exportData() {
            const inspectorName = document.getElementById('inspector-name').value || '×œ× ×¦×•×™×Ÿ';
            
            let csvContent = '\uFEFF';
            csvContent += '"××¤×§×—/×ª","×©× ×‘×™×ª ×”×¡×¤×¨","×× ×”×œ/×ª","××¡\' ×ª×œ××™×“×™×","×©×¤×”","××ª××˜×™×§×”","×× ×’×œ×™×ª","××“×¢×™×","××§×œ×™×","×™×¦×™×‘×•×ª","×—×–×•×Ÿ","××™×›×•×ª ×¦×•×•×ª","×× ×”×™×’×•×ª","×©×™×ª×•×¤×™ ×¤×¢×•×œ×”","××¢×•×¨×‘×•×ª ×”×•×¨×™×","××¨×’×•×Ÿ ×”×•×¨××”","×©×™×ª×•×£ ××•×¨×™×","×”×¢×¨×•×ª","××ª×’×¨×™ ×©×¤×”","××ª×’×¨×™ ××ª××˜×™×§×”","××ª×’×¨×™ ×× ×’×œ×™×ª","××ª×’×¨×™ ××“×¢×™×","××ª×’×¨×™ ××§×œ×™×","××ª×’×¨×™ ×™×¦×™×‘×•×ª ×¦×•×•×ª","××ª×’×¨×™ ×—×–×•×Ÿ","××ª×’×¨×™ ××™×›×•×ª ×¦×•×•×ª","××ª×’×¨×™ ×× ×”×™×’×•×ª","××ª×’×¨×™ ×©×™×ª×•×¤×™ ×¤×¢×•×œ×”","××ª×’×¨×™ ××¢×•×¨×‘×•×ª ×”×•×¨×™×","××ª×’×¨×™ ××¨×’×•×Ÿ ×”×•×¨××”","××ª×’×¨×™ ×©×™×ª×•×£ ××•×¨×™×"\n';
            
            schools.forEach(school => {
                const languageChallengesText = (school.languageChallenges || []).map(i => challenges.language[i]).filter(Boolean).join('; ');
                const mathChallengesText = (school.mathChallenges || []).map(i => challenges.math[i]).filter(Boolean).join('; ');
                const englishChallengesText = (school.englishChallenges || []).map(i => challenges.english[i]).filter(Boolean).join('; ');
                const scienceChallengesText = (school.scienceChallenges || []).map(i => challenges.science[i]).filter(Boolean).join('; ');
                const climateChallengesText = (school.climateChallenges || []).map(i => challenges.climate[i]).filter(Boolean).join('; ');
                const stabilityChallengesText = (school.stabilityChallenges || []).map(i => challenges.staff_stability[i]).filter(Boolean).join('; ');
                const visionChallengesText = (school.visionChallenges || []).map(i => challenges.vision[i]).filter(Boolean).join('; ');
                const staffQualityChallengesText = (school.staffQualityChallenges || []).map(i => challenges.staff_quality[i]).filter(Boolean).join('; ');
                const leadershipChallengesText = (school.leadershipChallenges || []).map(i => challenges.leadership[i]).filter(Boolean).join('; ');
                const collaborationChallengesText = (school.collaborationChallenges || []).map(i => challenges.collaboration[i]).filter(Boolean).join('; ');
                const parentChallengesText = (school.parentChallenges || []).map(i => challenges.parent_involvement[i]).filter(Boolean).join('; ');
                const teachingOrganizationChallengesText = (school.teachingOrganizationChallenges || []).map(i => challenges.teaching_organization[i]).filter(Boolean).join('; ');
                const teacherCollaborationChallengesText = (school.teacherCollaborationChallenges || []).map(i => challenges.teacher_collaboration[i]).filter(Boolean).join('; ');
                
                const row = [
                    inspectorName,
                    school.name || '',
                    school.principal || '',
                    school.students || '',
                    school.languageScore || '',
                    school.mathScore || '',
                    school.englishScore || '',
                    school.scienceScore || '',
                    school.climate || '',
                    school.stability || '',
                    school.vision || '',
                    school.staffQuality || '',
                    school.leadership || '',
                    school.collaboration || '',
                    school.parentInvolvement || '',
                    school.teachingOrganization || '',
                    school.teacherCollaboration || '',
                    school.notes || '',
                    languageChallengesText,
                    mathChallengesText,
                    englishChallengesText,
                    scienceChallengesText,
                    climateChallengesText,
                    stabilityChallengesText,
                    visionChallengesText,
                    staffQualityChallengesText,
                    leadershipChallengesText,
                    collaborationChallengesText,
                    parentChallengesText,
                    teachingOrganizationChallengesText,
                    teacherCollaborationChallengesText
                ].map(field => `"${String(field).replace(/"/g, '""')}"`);
                
                csvContent += row.join(',') + '\n';
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `××™×¤×•×™_×‘×ª×™_×¡×¤×¨_××œ×_${new Date().toLocaleDateString('he-IL').replace(/\./g, '_')}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('×”× ×ª×•× ×™× ×™×•×¦××• ×‘×”×¦×œ×—×” ×¢× ×›×œ ×”××ª×’×¨×™× ×‘×˜×§×¡×˜ ××œ× ×œ×›×œ ×”×ª×—×•××™×!');
        }

        function clearAll() {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×›×œ ×”× ×ª×•× ×™×? ×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.')) {
                schools = [];
                schoolId = 1;
                document.getElementById('inspector-name').value = '';
                renderTable();
                updateSummary();
                alert('×›×œ ×”× ×ª×•× ×™× × ××—×§×•!');
            }
        }

        // ××ª×—×•×œ ×”×˜×‘×œ×”
        renderTable();
        updateSummary();
    </script>
</body>
</html>